# 프로젝트 설명

> **스토링크는 AI기반 장기연재, 다작을 하는 작가용 스토리 관리 플랫폼입니다. 
작가들이 소설이나 시나리오를 작성할 때 필요한 다양한 기능을 제공합니다.**
> 

### 1. 문제 정의 및 서비스 가치 (Problem & Value)

- 웹 소설, 웹툰 시장이 발달하면서 장기연재, 다작을 하는 작가가 많아졌습니다.
- 저희 서비스는 작가들이 방대한 비정형 데이터의 파편화로 발생하는 '설정 오류 리스크'를 기술적으로 보조합니다.

### 2. 서비스 핵심 기능 및 사용자 동작 시나리오

**사용자 시나리오**

1. **서비스 소개 및 랜딩 페이지**
    - 처음 들어온 사용자들이 서비스를 파악할 수 있는 페이지
2. **서재**
    - 작가들이 작업중인, 작업했던 책들을 볼 수 있는 페이지
    - 서재 화면
        
        ![스크린샷 2025-12-25 오후 4.59.28.png](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-12-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.59.28.png)
        
    
3. **작업중인 소설 에디터 화면(글 작성, 캐릭터, 객체 확인)**
    - 소설을 추가로 작성하거나 소설에 등장하는 객체들의 정보를 확인할 수 있는 페이지
    - 에디터의 메인페이지로 다른 경로로 이동할 수 있는 페이지
    - 캐릭터 프로필 수동 편집 모드 : AI가 자동으로 태깅한 키워드 혹은 속성값들을 변경
    - 에디터 화면
        
        ![스크린샷 2025-12-25 오후 4.58.24.png](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-12-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.58.24.png)
        
    
4. **인물 관계 그래프 (일반 보기, 필터링된 보기)**
    - 소설에 있는 인물들의 관계를 그래프로 확인 할 수 있는 페이지
    - 필터링을 통해 원하는 인물에 대해 집중적으로 그래프를 확인
    - 두 노드 사이의 선을 클릭해 관계의 종류를 직접 변경
    - 새로운 인물 노드를 수동으로 추가하거나 위치를 조정
    - 관계 그래프 화면
        
        ![스크린샷 2025-12-25 오후 4.51.44.png](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-12-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.51.44.png)
        
    
5. **챗봇을 통한 질의응답**
    - 소설에 대한 정보 전체를 파악하고 있는 AI와의 자유로운 질의응답을 통한 정보 제공 및 브레인스토밍
    
6. **2차 콘텐츠 생성 및 배포**
    - 소설 내용을 자동으로 영상화 하고 연결된 유튜브 링크로 자동 배포 (영상화 에이전트 사용)
    - 영상을 제작할 때는 기존에 생성된 캐릭터 이미지를 기반으로 영상을 제작합니다.
    - 2차 콘텐츠 생성 화면
        
        ![스크린샷 2025-12-25 오후 4.58.56.png](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-12-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.58.56.png)
        
    
7. **최종 결과물 내보내기**
    - 문서로 출력하는 기능(pdf, epub 등)
    - 자동으로 메일로 전달하는 등의 기능

**시스템 동작**

1. 작가가 스토리에 내용을 추가하거나 수정했을 경우 추가된 내용이 기존 내용과 개연성, 설정이 충돌되는지 확인
    1. 충돌이 발생할 경우 사용자에게 알람을 보내 수정이 필요함을 알림
    
    ❗충돌 판정 기준 결정 필요(검증 단계 필요 예상)
    

**그외 서비스**

1. 사용자 요금제
    
    (추후 요금제 도입 시 적용)
    
    [요금제 정책](https://www.notion.so/2d45426888598164981acecf46df0c4b?pvs=21)
    

### 3. 기술 스택 및 선정 이유 (Tech Stack & Rationale)

- **Frontend:** React
- **Backend:** Java, Spring boot, Python, FastAPI
- **Database:** PostgreSQL, Neo4j
- **Message Broker**: RabbitMQ
- **AI :** LangGraph
    
    사용 이유
    
    1. 데이터 무결성 확보 이 서비스는 비정형 데이터를 구조화하여 Neo4j에 저장하므로, 초기 개체 추출의 작은 오차가 전체 지식 그래프의 신뢰성을 무너뜨릴 수 있습니다.
    2. 단일 에이전트의 부하 감소를 위해 Task단위로 격리해 각 단계의 정확도를 향상 시키고자 합니다.
    3. 에이전트의 할루시네이션 방지를 위해 검증 단계를 통한 무결성을 지킵니다.
    
- **Infrastructure**: AWS, Docker

### 4. 시스템 아키텍처 및 데이터 흐름 (System Architecture)

- system flow
    
    ### 1단계: 분석 요청 및 작업 예약 (Job Queuing)
    
    사용자가 스토리를 입력하면 시스템이 즉시 분석을 시작하는 것이 아니라, 안정성을 위해 **작업 큐(Queue)**에 저장하는 단계입니다.
    
    1. **스토리 전송:** 클라이언트가 스프링 서버로 분석할 데이터를 보냅니다.
    2. **작업 생성:** 서버는 PostgreSQL에 상태를 `PENDING`(대기 중)으로 생성합니다.
    3. **분석 큐 발행:** 서버가 RabbitMQ의 [Analysis Queue]에 작업을 전달합니다.
    4. **즉시 응답:** 사용자가 오래 기다리지 않도록 일단 `Job ID`를 반환하며 요청을 수락합니다.
    
    ### 2단계: 멀티 에이전트 분석 및 데이터 분기 저장 (LLM Analysis)
    
    비정형 데이터를 분석하여 구조화된 정보(속성, 관계)로 변환하고 각각의 DB에 저장하는 핵심 과정입니다.
    5.  **작업 소비:** Analysis Worker가 큐에서 작업을 가져와 **LLM 분석**을 수행합니다.
    6.  **데이터 추출:** 인물 속성 추출 및 관계 데이터를 생성합니다. (이것이 리더님이 말씀하신 '비정형 데이터 구조화'입니다.)
    7.  **콜백 처리:** 분석 결과를 스프링 서버로 다시 보냅니다.
    8.  **분기 저장:** 서버는 일반 데이터(속성/상태)는 **PostgreSQL**에, 관계 데이터(그래프)는 **Neo4j**에 나누어 저장합니다.
    
    ### 3단계: 이미지 생성 파이프라인 (Image Generation)
    
    분석된 정보를 바탕으로 시각적 결과물을 만드는 단계입니다.
    9.  **이미지 큐 발행:** 분석이 끝나면 서버가 다시 [Image Gen Queue]에 작업을 넣습니다.
    10. **이미지 생성:** Image Worker가 이미지 생성 모델을 구동합니다.
    11. **스토리지 저장:** 생성된 이미지를 **AWS S3**에 업로드하고 주소(URL)를 받습니다.
    12. **상태 완료:** 서버가 PostgreSQL의 상태를 `COMPLETED`로 업데이트합니다.
    
    ### 4단계: 상태 확인 (Polling)
    
    작업이 비동기로 처리되므로, 클라이언트가 작업이 끝났는지 주기적으로 묻는 단계입니다.
    13. **상태 조회:** 클라이언트가 `GET /jobs/{id}/status`로 현재 상태를 요청합니다.
    14. **상태 응답:** 서버가 DB를 확인하여 작업 완료 여부를 알려줍니다.
    
    ### 5단계: 최종 결과물 전달 (Final Delivery)
    
    모든 데이터가 준비되었을 때 사용자가 최종 리포트를 확인하는 단계입니다.
    15. **전체 데이터 요청:** 상태가 완료되면 클라이언트가 최종 결과를 요청합니다.
    16. **데이터 로드:** 서버가 PostgreSQL(이미지/속성)과 Neo4j(관계 그래프)에서 모든 정보를 불러옵니다.
    17. **최종 전달:** 텍스트, 시각화 그래프, 이미지가 포함된 **최종 리포트**를 사용자에게 전달합니다.
    
    ![image.png](image.png)
    
- architecture
    
    ![image.png](image%201.png)
    

### 5. 핵심 기술 도전 과제 (Engineering 'Weapon')

- 비정형 데이터 구조화 정확도
    
    서비스에서 제공되는 핵심 기능들은 작가가 집필한 내용을 분석한 데이터를 기반해 정보를 제공.
    
    그렇기 때문에 데이터 처리의 정확도를 향상 시키는 것이 중요.
    
- 데이터 처리 성능(속도) 향상
- 스토리 개연성 검증 성능 향상
    
    

### 6. 인프라 및 비기능 요구사항

| **이름** | **역할** | **인스턴스 타입** | **OS/엔진 버전** |
| --- | --- | --- | --- |
| **API Server** | 메인 백엔드 (Spring) | t4g.small | Java 21 |
| **AI Analyzer** | LangChain (FastAPI) | t4g.micro | Python 3.10+ |
| **Image Proc** | 이미지 처리 (FastAPI) | t4g.micro | Python 3.10+ |
| **Graph DB** | Neo4j (Self-hosted) | t4g.small | v5.26 Community |
| **Main DB** | PostgreSQL (RDS) | db.t4g.micro | v16.11 |